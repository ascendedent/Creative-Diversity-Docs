<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Element Diversity - Complete Field Legend</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.4;
            margin: 0;
            padding: 15px;
            background: #f5f5f5;
            color: #333;
            font-size: 13px;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1a1a1a;
            border-bottom: 3px solid #ff6b35;
            padding-bottom: 8px;
            margin: 0 0 15px 0;
            font-size: 1.4em;
        }
        h2 {
            color: #2c3e50;
            margin: 15px 0 8px 0;
            font-size: 1.1em;
            border-left: 3px solid #ff6b35;
            padding-left: 8px;
        }
        h3 {
            color: #34495e;
            margin: 12px 0 6px 0;
            font-size: 1em;
        }
        .field {
            margin-bottom: 6px;
            padding: 6px 8px;
            background: #f8f9fa;
            border-radius: 3px;
            border-left: 2px solid #3498db;
        }
        .field-name {
            font-weight: 700;
            color: #2980b9;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }
        .field-range {
            color: #7f8c8d;
            font-size: 10px;
            font-style: italic;
        }
        .field-desc {
            color: #555;
            margin-top: 2px;
            font-size: 11px;
        }
        .tier-box {
            background: #ecf0f1;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        .tier-header {
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 6px;
            font-size: 0.95em;
        }
        .note {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
            padding: 8px;
            margin: 10px 0;
            font-style: italic;
            color: #856404;
            font-size: 11px;
        }
        .new-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 9px;
            font-weight: 700;
            margin-left: 4px;
            vertical-align: middle;
        }
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
        }
        .section {
            min-width: 0;
            overflow-wrap: break-word;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
            margin-top: 8px;
        }
        .status-item {
            background: #e8f4f8;
            padding: 8px;
            border-radius: 3px;
            border-left: 2px solid #3498db;
            font-size: 11px;
        }
        .status-label {
            font-weight: 700;
            color: #2c3e50;
        }
        .usage-box {
            background: #e8f5e9;
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
        }
        .usage-item {
            margin-bottom: 6px;
            padding-left: 15px;
            position: relative;
            font-size: 11px;
        }
        .usage-item:before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #4caf50;
            font-weight: bold;
        }
        .score-interpretation {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 8px;
        }
        .score-box {
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            font-weight: 600;
            font-size: 11px;
        }
        .excellent { background: #d4edda; border: 2px solid #28a745; color: #155724; }
        .good { background: #d1ecf1; border: 2px solid #17a2b8; color: #0c5460; }
        .moderate { background: #fff3cd; border: 2px solid #ffc107; color: #856404; }
        .poor { background: #f8d7da; border: 2px solid #dc3545; color: #721c24; }
        ul {
            list-style: none;
            padding-left: 0;
        }
        ul li:before {
            content: "â€¢";
            color: #ff6b35;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Creative Element Diversity - Complete Field Legend</h1>

        <div class="note">
            <strong>ðŸ†• NEW FIELDS ADDED:</strong> This legend now includes action priority scores, diagnostic scoring components, bucket spend metrics, and editor concentration analysis. Look for the <span class="new-badge">NEW</span> badge.
        </div>

        <div class="main-grid">
            <div class="section">
                <h2>Element Taxonomy Fields</h2>
                
                <div class="tier-box">
                    <div class="tier-header">Tier 1: Core Elements (45% weight)</div>
                    <div class="field">
                        <span class="field-name">core_types</span>
                        <div class="field-desc">Type of core video (e.g., Demonstration, Testimonial)</div>
                    </div>
                    <div class="field">
                        <span class="field-name">core_frameworks</span>
                        <div class="field-desc">Framework structure used (e.g., Problem-Solution, AIDA)</div>
                    </div>
                    <div class="field">
                        <span class="field-name">core_avatars</span>
                        <div class="field-desc">Avatar featured in core (e.g., Male 30s, Female 50s)</div>
                    </div>
                    <div class="field">
                        <span class="field-name">core_locations</span>
                        <div class="field-desc">Location setting for core (e.g., Kitchen, Living Room)</div>
                    </div>
                </div>

                <div class="tier-box">
                    <div class="tier-header">Tier 2: Hook Elements (35% weight)</div>
                    <div class="field">
                        <span class="field-name">hook_angles</span>
                        <div class="field-desc">Hook angle approach (e.g., Problem-Agitate, Social Proof)</div>
                    </div>
                    <div class="field">
                        <span class="field-name">hook_types</span>
                        <div class="field-desc">Hook format type (e.g., Testimonial, Question)</div>
                    </div>
                    <div class="field">
                        <span class="field-name">hook_styles</span>
                        <div class="field-desc">Visual/production style of hook (e.g., UGC, Professional)</div>
                    </div>
                    <div class="field">
                        <span class="field-name">hook_specifics</span>
                        <div class="field-desc">Specific hook variation details</div>
                    </div>
                    <div class="field">
                        <span class="field-name">hook_avatars</span>
                        <div class="field-desc">Person featured in hook</div>
                    </div>
                    <div class="field">
                        <span class="field-name">hook_locations</span>
                        <div class="field-desc">Location setting for hook</div>
                    </div>
                </div>

                <div class="tier-box">
                    <div class="tier-header">Tier 3: Secondary Elements (20% weight)</div>
                    <div class="field">
                        <span class="field-name">lengths</span>
                        <div class="field-desc">Video length/duration</div>
                    </div>
                    <div class="field">
                        <span class="field-name">testings</span>
                        <div class="field-desc">Testing methodology used</div>
                    </div>
                    <div class="field">
                        <span class="field-name">asset_types</span>
                        <div class="field-desc">Asset classification (New, Variation, Alternate)</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>Creative-Level Diversity Scores</h2>
                
                <div class="field">
                    <span class="field-name">creative_diversity_health</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Overall diversity health score for this specific ad. Higher = more unique element combination within the product portfolio.</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_uniqueness_score</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">How unique this ad's Tier 1 core elements are. Blended score combining frequency and spend-share.</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_uniqueness_score</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">How unique this ad's Tier 2 hook elements are. Blended score combining frequency and spend-share.</div>
                </div>
                
                <div class="field">
                    <span class="field-name">secondary_uniqueness_score</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">How unique this ad's Tier 3 secondary elements are. Blended score combining frequency and spend-share.</div>
                </div>
                
                <div class="field">
                    <span class="field-name">full_uniqueness_score</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">How unique this ad is across ALL 13 elements combined.</div>
                </div>

                <h3>Diagnostic Scoring Components <span class="new-badge">NEW</span></h3>
                
                <div class="field">
                    <span class="field-name">core_uniqueness_log_score</span> <span class="field-range">(0-100)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Frequency-based uniqueness component (log curve). Always calculated regardless of spend.</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_uniqueness_log_score</span> <span class="field-range">(0-100)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Frequency-based uniqueness for hook elements.</div>
                </div>
                
                <div class="field">
                    <span class="field-name">secondary_uniqueness_log_score</span> <span class="field-range">(0-100)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Frequency-based uniqueness for secondary elements.</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_uniqueness_spend_share</span> <span class="field-range">(0-100+%)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Raw spend-share % within core bucket (unwinsorized, diagnostic only).</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_uniqueness_spend_share_winsor</span> <span class="field-range">(1-99%)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Winsorized spend-share % (capped 1-99%). Used in final score calculation. Display as "Tier 1 Bucket Spend %"</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_uniqueness_spend_share_winsor</span> <span class="field-range">(1-99%)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Winsorized spend-share % for hook bucket. Display as "Tier 2 Bucket Spend %"</div>
                </div>
                
                <div class="field">
                    <span class="field-name">secondary_uniqueness_spend_share_winsor</span> <span class="field-range">(1-99%)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Winsorized spend-share % for secondary bucket. Display as "Tier 3 Bucket Spend %"</div>
                </div>
            </div>
        </div>

        <h2>Frequency Counts (Overlap Indicators)</h2>
        
        <div class="main-grid">
            <div class="section">
                <div class="field">
                    <span class="field-name">core_fingerprint_frequency</span>
                    <div class="field-desc">Number of ads sharing this exact 4-element core combination (Tier 1)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_fingerprint_frequency</span>
                    <div class="field-desc">Number of ads sharing this exact 6-element hook combination (Tier 2)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">secondary_fingerprint_frequency</span>
                    <div class="field-desc">Number of ads sharing this exact 3-element secondary combination (Tier 3)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">full_fingerprint_frequency</span>
                    <div class="field-desc">Number of ads sharing ALL 13 elements (complete duplicate)</div>
                </div>
            </div>

            <div class="section">
                <h3>Bucket Spend Metrics <span class="new-badge">NEW</span></h3>
                
                <div class="field">
                    <span class="field-name">core_fp_spend</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Total spend across all ads in this core fingerprint bucket</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_fp_spend</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Total spend across all ads in this hook fingerprint bucket</div>
                </div>
                
                <div class="field">
                    <span class="field-name">sec_fp_spend</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Total spend across all ads in this secondary fingerprint bucket</div>
                </div>
                
                <div class="field">
                    <span class="field-name">full_fp_spend</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Total spend across all ads sharing this full fingerprint</div>
                </div>
                
                <div class="field">
                    <span class="field-name">editor_fp_spend</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">This editor's total spend within the full fingerprint bucket</div>
                </div>
                
                <div class="field">
                    <span class="field-name">editor_share_in_fp</span> <span class="field-range">(0-100%)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Percentage of bucket spend attributed to this editor. â‰¥70% = concentration risk</div>
                </div>
            </div>
        </div>

        <h2>Action & Priority System <span class="new-badge">NEW</span></h2>
        
        <div class="main-grid">
            <div class="section">
                <div class="field">
                    <span class="field-name">action_priority</span> <span class="field-range">(0-100)</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Urgency score calculated from overlap frequency, spend dominance, and tier diversity. Higher = more urgent action needed.</div>
                </div>
                
                <div class="note">
                    <strong>Formula:</strong><br>
                    40% weight: Duplicate count (â‰¥5 duplicates)<br>
                    40% weight: Spend dominance (â‰¥30% of bucket)<br>
                    20% weight: Poor tier diversity (score <60)
                </div>
            </div>

            <div class="section">
                <div class="field">
                    <span class="field-name">next_action_flag</span> <span class="new-badge">NEW</span>
                    <div class="field-desc">Recommended next action for this creative based on diversity health and spend patterns</div>
                </div>
                
                <div class="note">
                    <strong>Possible Values:</strong><br>
                    â€¢ COMMISSION_NEW_HOOK_HIGH_SPEND<br>
                    â€¢ VARY_CORE_FIRST<br>
                    â€¢ VARY_HOOKS_FIRST<br>
                    â€¢ DISTRIBUTE_BRIEFS<br>
                    â€¢ SCALE_PROMISING_UNIQUE<br>
                    â€¢ DUPLICATE_WINNER_WITH_VARIATIONS<br>
                    â€¢ MONITOR
                </div>
            </div>
        </div>

        <h2>Core-Level Health Scores</h2>
        
        <div class="main-grid">
            <div class="section">
                <div class="field">
                    <span class="field-name">total_core_versions</span>
                    <div class="field-desc">Total number of unique core versions (variations of the base core number)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_tier1_diversity</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Diversity score for Tier 1 core elements across all core versions</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_tier2_diversity</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Diversity score for Tier 2 hook elements across all core versions</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_tier3_diversity</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Diversity score for Tier 3 secondary elements across all core versions</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_overall_diversity_health</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Weighted composite diversity health for this entire core</div>
                </div>
                
                <div class="field">
                    <span class="field-name">core_combination_variety_pct</span> <span class="field-range">(0-1.0)</span>
                    <div class="field-desc">Ratio of unique element combinations to total versions</div>
                </div>
            </div>

            <div class="section">
                <h3>Hook-Level Health Scores</h3>
                
                <div class="field">
                    <span class="field-name">total_hook_versions</span>
                    <div class="field-desc">Total number of unique hook versions</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_tier1_diversity</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Diversity score for Tier 1 core elements across all hook versions</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_tier2_diversity</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Diversity score for Tier 2 hook elements across all hook versions</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_tier3_diversity</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Diversity score for Tier 3 secondary elements across all hook versions</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_overall_diversity_health</span> <span class="field-range">(0-100)</span>
                    <div class="field-desc">Weighted composite diversity health for this entire hook</div>
                </div>
                
                <div class="field">
                    <span class="field-name">hook_combination_variety_pct</span> <span class="field-range">(0-1.0)</span>
                    <div class="field-desc">Ratio of unique element combinations to total versions</div>
                </div>
            </div>
        </div>

        <h2>Status Flags</h2>
        
        <h3>similarity_status - Categorical flag for overlap risk</h3>
        <div class="status-grid">
            <div class="status-item">
                <div class="status-label">UNIQUE</div>
                Only 1 ad with this combination
            </div>
            <div class="status-item">
                <div class="status-label">LOW_OVERLAP</div>
                2-3 ads share this combination
            </div>
            <div class="status-item">
                <div class="status-label">MODERATE_OVERLAP</div>
                4-5 ads share this combination
            </div>
            <div class="status-item">
                <div class="status-label">HIGH_OVERLAP</div>
                6+ ads share this combination
            </div>
        </div>

        <h3>diversity_rating - Grade based on creative diversity health</h3>
        <div class="status-grid">
            <div class="status-item">
                <div class="status-label">EXCELLENT</div>
                Score 80-100
            </div>
            <div class="status-item">
                <div class="status-label">GOOD</div>
                Score 60-79
            </div>
            <div class="status-item">
                <div class="status-label">MODERATE</div>
                Score 40-59
            </div>
            <div class="status-item">
                <div class="status-label">POOR</div>
                Score 0-39
            </div>
        </div>

        <div class="main-grid">
            <div class="section">
                <h2>Creative-Level Performance Metrics</h2>
                
                <div class="field">
                    <span class="field-name">spend</span> | 
                    <span class="field-name">revenue</span> | 
                    <span class="field-name">orders</span> | 
                    <span class="field-name">impressions</span> | 
                    <span class="field-name">clicks</span>
                    <div class="field-desc">Raw performance metrics for the individual ad</div>
                </div>
                
                <div class="field">
                    <span class="field-name">roas</span>
                    <div class="field-desc">Return on ad spend (revenue Ã· spend)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">cpc</span>
                    <div class="field-desc">Cost per click (spend Ã· clicks)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">cpa</span>
                    <div class="field-desc">Cost per acquisition (spend Ã· orders)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">ctr</span>
                    <div class="field-desc">Click-through rate (clicks Ã· impressions)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">cvr</span>
                    <div class="field-desc">Conversion rate (orders Ã· clicks)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">aov</span>
                    <div class="field-desc">Average order value (revenue Ã· orders)</div>
                </div>
                
                <div class="field">
                    <span class="field-name">cpm</span>
                    <div class="field-desc">Cost per thousand impressions</div>
                </div>

                <h2>Core-Level Performance Metrics</h2>
                <p style="margin: 5px 0; font-size: 11px;"><em>Aggregate performance across all versions of the base core:</em></p>
                
                <div class="field">
                    <span class="field-name">core_roas</span> | 
                    <span class="field-name">core_cpc</span> | 
                    <span class="field-name">core_cpa</span> | 
                    <span class="field-name">core_ctr</span> | 
                    <span class="field-name">core_cvr</span> | 
                    <span class="field-name">core_aov</span> | 
                    <span class="field-name">core_cpm</span>
                    <div class="field-desc">Performance metrics aggregated for all versions of this core number</div>
                </div>
            </div>

            <div class="section">
                <h2>Hook-Level Performance Metrics</h2>
                <p style="margin: 5px 0; font-size: 11px;"><em>Aggregate performance across all versions of the base hook:</em></p>
                
                <div class="field">
                    <span class="field-name">hook_roas</span> | 
                    <span class="field-name">hook_cpc</span> | 
                    <span class="field-name">hook_cpa</span> | 
                    <span class="field-name">hook_ctr</span> | 
                    <span class="field-name">hook_cvr</span> | 
                    <span class="field-name">hook_aov</span> | 
                    <span class="field-name">hook_cpm</span>
                    <div class="field-desc">Performance metrics aggregated for all versions of this hook number</div>
                </div>
            </div>
        </div>

        <h2>How to Use This Data</h2>
        
        <div class="main-grid">
            <div class="section">
                <div class="usage-box">
                    <h3 style="margin-top: 0;">Prioritize Actions by Urgency</h3>
                    <div class="usage-item">Filter by action_priority â‰¥ 60 for high-priority items</div>
                    <div class="usage-item">Group by next_action_flag to see action distribution</div>
                    <div class="usage-item">Sort by action_priority DESC to tackle most urgent first</div>

                    <h3>Diagnose Scoring Issues</h3>
                    <div class="usage-item">Compare log_score vs spend_score vs final score</div>
                    <div class="usage-item">Check if ads are below spend thresholds (using log-only)</div>
                    <div class="usage-item">Review bucket sizes (frequency fields) for context</div>
                </div>
            </div>

            <div class="section">
                <div class="usage-box">
                    <h3 style="margin-top: 0;">Monitor Portfolio Balance</h3>
                    <div class="usage-item">Track core_overall_diversity_health to ensure each core has sufficient variety</div>
                    <div class="usage-item">Use combination_variety_pct to detect duplicate creative patterns</div>
                    <div class="usage-item">Watch for editor_share_in_fp â‰¥ 70% (concentration risk)</div>

                    <h3>Optimize Creative Production</h3>
                    <div class="usage-item">Focus on elements with high uniqueness scores and strong performance</div>
                    <div class="usage-item">Avoid creating more ads with HIGH_OVERLAP status unless performance justifies it</div>
                    <div class="usage-item">Use action flags to guide brief distribution and creative direction</div>
                </div>
            </div>
        </div>

        <h2>Interpreting Diversity Scores</h2>
        
        <div class="score-interpretation">
            <div class="score-box excellent">
                <div>80-100</div>
                <div style="font-size: 10px; margin-top: 3px;">Excellent diversity<br>Highly unique</div>
            </div>
            <div class="score-box good">
                <div>60-79</div>
                <div style="font-size: 10px; margin-top: 3px;">Good diversity<br>Acceptable overlap</div>
            </div>
            <div class="score-box moderate">
                <div>40-59</div>
                <div style="font-size: 10px; margin-top: 3px;">Moderate diversity<br>Concentration risk</div>
            </div>
            <div class="score-box poor">
                <div>0-39</div>
                <div style="font-size: 10px; margin-top: 3px;">Poor diversity<br>Too many similar</div>
            </div>
        </div>

        <div class="note">
            Lower diversity doesn't mean poor performance, but it increases Andromeda penalty risk due to creative fatigue and algorithmic pattern recognition. Use action_priority scores to focus on the most critical issues first.
        </div>
    </div>
</body>
</html>
